(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{172:function(t,s,a){t.exports=a.p+"assets/img/arpanet.f6558c00.png"},173:function(t,s,a){t.exports=a.p+"assets/img/packet-switching.064c696a.png"},174:function(t,s,a){t.exports=a.p+"assets/img/suite.61b81fd5.png"},175:function(t,s,a){t.exports=a.p+"assets/img/threehand.b6a6af6e.png"},176:function(t,s,a){t.exports=a.p+"assets/img/url.d9876b29.png"},177:function(t,s,a){t.exports=a.p+"assets/img/dns.24e955e4.png"},178:function(t,s,a){t.exports=a.p+"assets/img/cdn.81430886.png"},179:function(t,s,a){t.exports=a.p+"assets/img/https.2691172c.png"},180:function(t,s,a){t.exports=a.p+"assets/img/netttohttp.35b1e80d.png"},181:function(t,s,a){t.exports=a.p+"assets/img/baidu.8a0d467d.png"},182:function(t,s,a){t.exports=a.p+"assets/img/whistleweb.dc8b1652.png"},183:function(t,s,a){t.exports=a.p+"assets/img/httpres.c28b0dda.png"},184:function(t,s,a){t.exports=a.p+"assets/img/post-product.af15a836.png"},185:function(t,s,a){t.exports=a.p+"assets/img/proclaimedinwriting.b89fd551.png"},186:function(t,s,a){t.exports=a.p+"assets/img/encryption.a6b17e4b.png"},187:function(t,s,a){t.exports=a.p+"assets/img/encryption1.10c4501c.png"},188:function(t,s,a){t.exports=a.p+"assets/img/asymmetric.cb28f583.png"},189:function(t,s,a){t.exports=a.p+"assets/img/certificatesystem.ac14e9a1.png"},190:function(t,s,a){t.exports=a.p+"assets/img/vser-certificate.7c999699.png"},191:function(t,s,a){t.exports=a.p+"assets/img/https-work.743908e8.png"},192:function(t,s,a){t.exports=a.p+"assets/img/http1.1.50bd0ae8.png"},193:function(t,s,a){t.exports=a.p+"assets/img/http2.0.1a33ad54.png"},194:function(t,s,a){t.exports=a.p+"assets/img/http1status.9140890c.png"},195:function(t,s,a){t.exports=a.p+"assets/img/http2.0scheme.73524ea3.png"},196:function(t,s,a){t.exports=a.p+"assets/img/hpack.b40ee839.png"},197:function(t,s,a){t.exports=a.p+"assets/img/http3.0.98fe14d2.png"},33:function(t,s,a){t.exports=a.p+"assets/img/switchOmega.36359ce8.png"},340:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"计算机网络简史"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#计算机网络简史"}},[t._v("#")]),t._v(" 计算机网络简史")]),t._v(" "),n("p",[n("font",{attrs:{color:"red"}},[t._v("学计算机一定要注重人文知识，人文知识最终影响你的判断力，以及你对未来的认知，有这样一部分功底，你就比别人看的多。")])],1),t._v(" "),n("h3",{attrs:{id:"_1-arpanet-的发展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-arpanet-的发展"}},[t._v("#")]),t._v(" 1. ARPANET 的发展")]),t._v(" "),n("p",[t._v("ARPA那时候不叫计算机网路，有一个叫做数据网的方向，黄色部分连接的美国的地图。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(172),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"_1965-packet-switching-分包交换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1965-packet-switching-分包交换"}},[t._v("#")]),t._v(" 1965-packet switching（分包交换）")]),t._v(" "),n("p",[t._v("The data packets take different routes to their destinations")]),t._v(" "),n("p",[n("img",{attrs:{src:a(173),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"_1969"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1969"}},[t._v("#")]),t._v(" 1969")]),t._v(" "),n("ul",[n("li",[t._v("第一个RFC（开始通过APPANET发布）\nR：request F：from C：comment\n就是写一篇文章，别人可以对你的文章进行评论")]),t._v(" "),n("li",[t._v("第一个接口处理信息单元（interface Message Processor）")]),t._v(" "),n("li",[t._v("互联网internet")])]),t._v(" "),n("h4",{attrs:{id:"_1970s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1970s"}},[t._v("#")]),t._v(" 1970s")]),t._v(" "),n("ul",[n("li",[t._v("1971- 第一个email（ARPANET）")]),t._v(" "),n("li",[t._v("1971- ALOHAnet：第一个wifi（Wireless Fidelity）")]),t._v(" "),n("li",[t._v("1973- Ethernet")]),t._v(" "),n("li",[t._v("1973- SATNET")]),t._v(" "),n("li",[t._v("1973- IP电话/互联网电话（VOIP），第一个给用户使用的电话在1995")]),t._v(" "),n("li",[t._v("1974- 路由器（施乐 Xerox）")]),t._v(" "),n("li",[t._v("1976- 第一个IP路由器，但是被称做网关（Gateway）")]),t._v(" "),n("li",[t._v("1978- Bob Kahn发明了TCP/IP协议")])]),t._v(" "),n("h3",{attrs:{id:"_2-逐渐成形的互联网"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-逐渐成形的互联网"}},[t._v("#")]),t._v(" 2. 逐渐成形的互联网")]),t._v(" "),n("h4",{attrs:{id:"_1980s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1980s"}},[t._v("#")]),t._v(" 1980s")]),t._v(" "),n("ul",[n("li",[t._v("1981- internet protocal Version 4 ，RCF 791")]),t._v(" "),n("li",[t._v("1981- BITNet")]),t._v(" "),n("li",[t._v("1981- CSNet")]),t._v(" "),n("li",[t._v("1983- ARPANET迁移到TCP/IP协议")]),t._v(" "),n("li",[t._v("1983- DNS（Domain Name System）")]),t._v(" "),n("li",[t._v("1986- BITNet II")]),t._v(" "),n("li",[t._v("1988- WaveLan（Wi-Fi）")]),t._v(" "),n("li",[t._v("1988- Packet filter wall （第一个防火墙Paper）")]),t._v(" "),n("li",[t._v("1988- APAPNet 升级为T1主干网络")])]),t._v(" "),n("h4",{attrs:{id:"_1990s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1990s"}},[t._v("#")]),t._v(" 1990s")]),t._v(" "),n("ul",[n("li",[t._v("1990 - 第一个交换机（Kalpana）")]),t._v(" "),n("li",[t._v("1996 - IPv6")]),t._v(" "),n("li",[t._v("1997 - 802.11 wifi 标准（2mbps）")]),t._v(" "),n("li",[t._v("1999 - 802.1a 标准（5GHz 25mbps）")]),t._v(" "),n("li",[t._v("1999 - 802.11b 标准（11mbps）")]),t._v(" "),n("li",[t._v("1999 - WEP加密协议（RC4+CRC-32）")])]),t._v(" "),n("h4",{attrs:{id:"_2000s"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2000s"}},[t._v("#")]),t._v(" 2000s")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("年份")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("事件")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("2003")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("801.11g（54mbps）")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("2003")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("WPA加密协议")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("2003")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("WPA2加密协议")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("2008")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("4G标准（100Mbps）")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("2009")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("802.11n标准（600Mbps）")])])])]),t._v(" "),n("h2",{attrs:{id:"_1-1-osi七层模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-osi七层模型"}},[t._v("#")]),t._v(" 1.1 OSI七层模型")]),t._v(" "),n("h3",{attrs:{id:"_1-1-1-osi七层模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-osi七层模型"}},[t._v("#")]),t._v(" 1.1.1 OSI七层模型")]),t._v(" "),n("ul",[n("li",[t._v("开放式系统互联网模型")]),t._v(" "),n("li",[t._v("世界范围内的网络标准概念模型")]),t._v(" "),n("li",[t._v("OSI的努力让互联网协议组件走向标准化")])]),t._v(" "),n("h4",{attrs:{id:"应用层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用层"}},[t._v("#")]),t._v(" 应用层")]),t._v(" "),n("p",[t._v("提供高级API")]),t._v(" "),n("ul",[n("li",[t._v("定义了网络主机提供的方法和接口（业务协议、高级协议）")]),t._v(" "),n("li",[t._v("往往直接对应用户行为")]),t._v(" "),n("li",[t._v("例如：HTTP、FTP、SMTP等")])]),t._v(" "),n("h4",{attrs:{id:"展示层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#展示层"}},[t._v("#")]),t._v(" 展示层")]),t._v(" "),n("ul",[n("li",[t._v("也被称做语法层")]),t._v(" "),n("li",[t._v("将Application layer中的数据转化为传输格式，保留语义（如：序列化、加密解密、字符串编码解码等）")]),t._v(" "),n("li",[t._v("确保数据发送取出后可以被接受者理解")])]),t._v(" "),n("h4",{attrs:{id:"会话层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#会话层"}},[t._v("#")]),t._v(" 会话层")]),t._v(" "),n("ul",[n("li",[t._v("提供管理会话的方法（Open/Close/ReOpen/检查状态等）")]),t._v(" "),n("li",[t._v("提供对底层连接的断断续续的隐藏；甚至对多种底层流的隐藏（提供数据同步点）")])]),t._v(" "),n("h4",{attrs:{id:"传输层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#传输层"}},[t._v("#")]),t._v(" 传输层")]),t._v(" "),n("p",[t._v("提供主机到主机（host-to-host）的数据通信能力")]),t._v(" "),n("ul",[n("li",[t._v("建立连接保证数据封包发送、接受到的顺序一致")]),t._v(" "),n("li",[t._v("提供可靠性（发送者知道数据有没有被完整送达）")]),t._v(" "),n("li",[t._v("提供流控制（发送者和接受者同步速率）")]),t._v(" "),n("li",[t._v("提供多路复用（多种信号复用一个信道）")])]),t._v(" "),n("h4",{attrs:{id:"网络层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络层"}},[t._v("#")]),t._v(" 网络层")]),t._v(" "),n("p",[t._v("提供数据在逻辑单元（例如IP地址）之间的传递能力")]),t._v(" "),n("ul",[n("li",[t._v("路由：决定数据的下一站在哪里")]),t._v(" "),n("li",[t._v("寻址：为数据封包增加头信息（地址等）")])]),t._v(" "),n("h4",{attrs:{id:"数据链路层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据链路层"}},[t._v("#")]),t._v(" 数据链路层")]),t._v(" "),n("p",[t._v("提供数据在设备和设备之间的传输能力")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("流控制 ：发送者接受者之间同步数据是收发速度和数据量")])]),t._v(" "),n("li",[n("p",[t._v("错误控制：检测数据有没有出错，并重发出错的数据")])])]),t._v(" "),n("h4",{attrs:{id:"物理层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#物理层"}},[t._v("#")]),t._v(" 物理层")]),t._v(" "),n("p",[t._v("定义底层一个位（bit）的数据如何让变成物理信号")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("将数据链路层发生的数据传递行为转化成为物理设备识别的信号")])]),t._v(" "),n("li",[n("p",[t._v("封装了大量底层物理设备的能力")])])]),t._v(" "),n("h2",{attrs:{id:"_1-2-tcp-ip-协议和互联网协议群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-tcp-ip-协议和互联网协议群"}},[t._v("#")]),t._v(" 1.2 TCP/IP 协议和互联网协议群")]),t._v(" "),n("p",[t._v("今天使用最多的协议群")]),t._v(" "),n("h3",{attrs:{id:"_1-2-1-tcp-ip协议群简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-tcp-ip协议群简介"}},[t._v("#")]),t._v(" 1.2.1 TCP/IP协议群简介")]),t._v(" "),n("h4",{attrs:{id:"互联网协议群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#互联网协议群"}},[t._v("#")]),t._v(" 互联网协议群")]),t._v(" "),n("ul",[n("li",[t._v("类似OSI模型，一种网络协议的概念模型")])]),t._v(" "),n("p",[t._v("它对OSI七层模型做了简化，把OSI的应用层、展示层、会话层简化成了应用层")]),t._v(" "),n("p",[n("img",{attrs:{src:a(174),alt:""}})]),t._v(" "),n("ol",[n("li",[t._v("应用层")])]),t._v(" "),n("ul",[n("li",[t._v("提供应用间通信能力（HTTP协议）")])]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("传输层")])]),t._v(" "),n("ul",[n("li",[t._v("提供主机到主机的通信能力（TCP/UDP协议）")])]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("网络层")])]),t._v(" "),n("ul",[n("li",[t._v("提供地址到地址的通信能力（form：12.3.41.1->to :9.1.2.12）")])]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("链路层")])]),t._v(" "),n("ul",[n("li",[t._v("提供设备到设备的通信能力（设备1->设备2）")])]),t._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[t._v("物理层")])]),t._v(" "),n("ul",[n("li",[t._v("光电信号的传输")])]),t._v(" "),n("h3",{attrs:{id:"_1-2-2-tcp-三次握手-three-way-handshake"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-tcp-三次握手-three-way-handshake"}},[t._v("#")]),t._v(" 1.2.2 TCP 三次握手（Three-Way Handshake）")]),t._v(" "),n("p",[n("img",{attrs:{src:a(175),alt:""}})]),t._v(" "),n("p",[t._v("TCP三次握手用于在客户端和服务器之间建立可靠的连接。具体步骤如下：")]),t._v(" "),n("p",[t._v("1.SYN（同步报文）：\n客户端：向服务器发送一个TCP报文，SYN标志位设为1，并包含一个初始序列号（Sequence Number, seq）。此报文表示客户端请求建立连接。\n报文示例：SYN(seq=x)。")]),t._v(" "),n("p",[t._v("2.SYN-ACK（同步-确认报文）：\n服务器：收到SYN报文后，回复一个SYN-ACK报文，SYN和ACK标志位均设为1。服务器的SYN报文包含其自己的初始序列号（seq=y），ACK报文的确认号（Acknowledgment Number, ack）设为客户端的序列号加1，即ack=x+1。\n报文示例：SYN-ACK(seq=y, ack=x+1)。")]),t._v(" "),n("p",[t._v("3.ACK（确认报文）：\n客户端：收到服务器的SYN-ACK报文后，发送一个ACK报文，ACK标志位设为1，确认号设为服务器的序列号加1，即ack=y+1。至此，连接建立成功，可以开始数据传输。\n报文示例：ACK(ack=y+1)")]),t._v(" "),n("h3",{attrs:{id:"_1-2-3-tcp-ip协议的消息顺序处理方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-tcp-ip协议的消息顺序处理方法"}},[t._v("#")]),t._v(" 1.2.3 TCP/IP协议的消息顺序处理方法")]),t._v(" "),n("ul",[n("li",[t._v("消息的绝对顺序用（SEQ，ACK）这一对元组描述\n"),n("ul",[n("li",[t._v("SEQ（Sequence）：这个消息发送前一共发送了多少字节")]),t._v(" "),n("li",[t._v("ACK （Acknowledge）：这个消息发送前一共收到了多少字节")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-2-4-tcp-四次挥手-four-way-handshake"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4-tcp-四次挥手-four-way-handshake"}},[t._v("#")]),t._v(" 1.2.4 TCP 四次挥手（Four-Way Handshake）")]),t._v(" "),n("p",[t._v("TCP四次挥手用于断开客户端和服务器之间的连接。具体步骤如下：")]),t._v(" "),n("p",[t._v("1.FIN（终止报文）：\n客户端：发送一个FIN报文，FIN标志位设为1，表示客户端要终止连接。\n报文示例：FIN(seq=u)。")]),t._v(" "),n("p",[t._v("2.ACK（确认报文）：\n服务器：收到FIN报文后，回复一个ACK报文，确认号设为客户端的序列号加1，即ack=u+1。\n报文示例：ACK(ack=u+1)。")]),t._v(" "),n("p",[t._v("3.FIN（终止报文）：\n服务器：准备好终止连接后，发送一个FIN报文，FIN标志位设为1，并包含其自己的序列号（seq=v）。\n报文示例：FIN(seq=v)。")]),t._v(" "),n("p",[t._v("4.ACK（确认报文）：\n客户端：收到服务器的FIN报文后，发送一个ACK报文，确认号设为服务器的序列号加1，即ack=v+1。至此，连接彻底断开。\n报文示例：ACK(ack=v+1)。")]),t._v(" "),n("h3",{attrs:{id:"_1-2-5-详细说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-5-详细说明"}},[t._v("#")]),t._v(" 1.2.5 详细说明")]),t._v(" "),n("p",[t._v("三次握手的目的：")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("确认连接双方都有接收和发送数据的能力。")]),t._v(" "),n("p",[t._v("同步序列号，以便双方能够正确重组数据包。")]),t._v(" "),n("p",[t._v("防止旧的重复连接请求干扰新的连接。")])]),t._v(" "),n("p",[t._v("四次挥手的步骤原因：")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("客户端发送FIN报文：表明客户端已无数据要发送，但仍能接收数据。")]),t._v(" "),n("p",[t._v("服务器发送ACK报文：确认收到客户端的FIN报文。")]),t._v(" "),n("p",[t._v("服务器发送FIN报文：在处理完所有数据后，通知客户端可以断开连接。")]),t._v(" "),n("p",[t._v("客户端发送ACK报文：确认收到服务器的FIN报文后，连接正式关闭。")]),t._v(" "),n("p",[t._v("这些步骤确保了在断开连接时，双方都能处理完所有的数据传输，不会有数据丢失或中断。")])]),t._v(" "),n("h2",{attrs:{id:"_1-3-dns与cdn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-dns与cdn"}},[t._v("#")]),t._v(" 1.3 DNS与CDN")]),t._v(" "),n("h3",{attrs:{id:"_1-3-1-dns的基础知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-1-dns的基础知识"}},[t._v("#")]),t._v(" 1.3.1 DNS的基础知识")]),t._v(" "),n("h4",{attrs:{id:"统一资源定位符-url"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#统一资源定位符-url"}},[t._v("#")]),t._v(" 统一资源定位符（URL）")]),t._v(" "),n("ul",[n("li",[t._v("也被称作（网址），用于定位互联网上的资源")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(176),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"dns-query过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dns-query过程"}},[t._v("#")]),t._v(" DNS Query过程")]),t._v(" "),n("p",[n("img",{attrs:{src:a(177),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"_1-3-2-cdn-实现原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-2-cdn-实现原理"}},[t._v("#")]),t._v(" 1.3.2 CDN 实现原理")]),t._v(" "),n("p",[t._v("cdn用于存变化不大的文件")]),t._v(" "),n("p",[n("img",{attrs:{src:a(178),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"cdn云测工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cdn云测工具"}},[t._v("#")]),t._v(" CDN云测工具")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.17ce.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("17ce"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"_1-4-http入门和基础工具链"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-http入门和基础工具链"}},[t._v("#")]),t._v(" 1.4 HTTP入门和基础工具链")]),t._v(" "),n("h4",{attrs:{id:"蒂姆-伯纳斯-李"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#蒂姆-伯纳斯-李"}},[t._v("#")]),t._v(" 蒂姆.伯纳斯-李")]),t._v(" "),n("ul",[n("li",[t._v("英国著名科学家（1955-）\n"),n("ul",[n("li",[t._v("万维网（1990年HTTP协议）")]),t._v(" "),n("li",[t._v("创办MIT人工智能实验室")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-4-1-http协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-http协议"}},[t._v("#")]),t._v(" 1.4.1 HTTP协议")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("超文本传输协议")]),t._v(" "),n("p",[t._v("超是一个形容词，形容这个文本很厉害,这个协议是挂在tcp上实现的，开始设计就是客户端和服务端通信的，它提供了一种标准就是中间可以传文本，\n因为传二进制太复杂了，传文本大家都看的懂，容易推广就容易普及。")])]),t._v(" "),n("li",[n("p",[t._v("处理客户端和服务端之间的通信")])]),t._v(" "),n("li",[n("p",[t._v("http请求/http返回")])]),t._v(" "),n("li",[n("p",[t._v("网页/json/xml/提交表单")])])]),t._v(" "),n("h4",{attrs:{id:"纯文本-无状态-stateless"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#纯文本-无状态-stateless"}},[t._v("#")]),t._v(" 纯文本+无状态（stateless）")]),t._v(" "),n("ul",[n("li",[t._v("应用层协议（下面可以是TCP/IP）")]),t._v(" "),n("li",[t._v("信息纯文本传输")]),t._v(" "),n("li",[t._v("无状态\n"),n("ul",[n("li",[t._v("每次请求独立")]),t._v(" "),n("li",[t._v("请求间不影响")])])]),t._v(" "),n("li",[t._v("浏览器提供了手段维护状态（Cookie，session,*Storage等）")])]),t._v(" "),n("h4",{attrs:{id:"http历史"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http历史"}},[t._v("#")]),t._v(" HTTP历史")]),t._v(" "),n("ul",[n("li",[t._v("1991 HTTP 0.9")]),t._v(" "),n("li",[t._v("1996 HTTP 1.0")]),t._v(" "),n("li",[t._v("1999 HTTP 1.1")]),t._v(" "),n("li",[t._v("2015 HTTP 2.0")])]),t._v(" "),n("h4",{attrs:{id:"设计的基础因素"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设计的基础因素"}},[t._v("#")]),t._v(" 设计的基础因素")]),t._v(" "),n("ul",[n("li",[t._v("带宽\n"),n("ul",[n("li",[t._v("基础网络（线路、设备等）")])])]),t._v(" "),n("li",[t._v("延迟\n"),n("ul",[n("li",[t._v("浏览器")]),t._v(" "),n("li",[t._v("DNS查询")]),t._v(" "),n("li",[t._v("建立连接（TCP三次握手）")])])])]),t._v(" "),n("h4",{attrs:{id:"设计考虑因素-缓存与带宽优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设计考虑因素-缓存与带宽优化"}},[t._v("#")]),t._v(" 设计考虑因素-缓存与带宽优化")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("缓存")]),t._v(" "),n("ul",[n("li",[t._v("（http1.0）提供缓存机制如IF-Modified-Since等基础缓存控制策略")]),t._v(" "),n("li",[t._v("（http1.1）提供E-Tag等高级缓存策略")])])]),t._v(" "),n("li",[n("p",[t._v("带宽优化")]),t._v(" "),n("ul",[n("li",[t._v("（http 1.1）利用range头获取文件的某个部分")]),t._v(" "),n("li",[t._v("（http 1.1）利用长连接让多个请求在一个TCP连接上排队\n如果每一个请求都建立一个TCP，这样是非常浪费带宽的，如果所有请求都复用一个tcp，那么这样省去了一些tcp握手的开销。")]),t._v(" "),n("li",[t._v("（http 2.0）利用多路复用技术同时传输多个请求\n进一步节省带宽")])])])]),t._v(" "),n("h4",{attrs:{id:"设计考虑因素-压缩-安全性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设计考虑因素-压缩-安全性"}},[t._v("#")]),t._v(" 设计考虑因素-压缩/安全性")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("压缩")]),t._v(" "),n("ul",[n("li",[t._v("主流web服务器如nginx/express等都提供gzip压缩功能")]),t._v(" "),n("li",[t._v("（http2.0）采用二进制传输，头部使用HPACK算法压缩")])])]),t._v(" "),n("li",[n("p",[t._v("HTTPS")]),t._v(" "),n("ul",[n("li",[t._v("在HTTP和TCP/IP之间增加TSL/SSL层")]),t._v(" "),n("li",[t._v("数据传输加密（非对称+对称加密）")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-4-2-https"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-https"}},[t._v("#")]),t._v(" 1.4.2 HTTPS")]),t._v(" "),n("ul",[n("li",[t._v("安全超文本传输协议（Hyper Text  Transfer Protocol Secure）")]),t._v(" "),n("li",[t._v("数据加密传输\n"),n("ul",[n("li",[t._v("防止各种攻击手段（信息泄露、篡改等）")])])]),t._v(" "),n("li",[t._v("SSL/TSL（Secure Socket Layer/Transport Layer Secure）\n"),n("ul",[n("li",[t._v("SSL-安全套接层")]),t._v(" "),n("li",[t._v("TSL-传输层安全性协议")]),t._v(" "),n("li",[t._v("需要在客户端安装证书")])])])]),t._v(" "),n("img",{attrs:{width:"300px",src:a(179)}}),t._v(" "),n("h3",{attrs:{id:"_1-4-3-node-js实战http请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-node-js实战http请求"}},[t._v("#")]),t._v(" 1.4.3 Node.js实战http请求")]),t._v(" "),n("h4",{attrs:{id:"header和body-实战"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#header和body-实战"}},[t._v("#")]),t._v(" 🍅 Header和Body（实战）")]),t._v(" "),n("ul",[n("li",[t._v("http协议是一个文本传输协议，传输内容是人类可读的文本，大体分成2部分：\n"),n("ul",[n("li",[t._v("请求头（header）/返回头")]),t._v(" "),n("li",[t._v("消息体Body")])])]),t._v(" "),n("li",[t._v("观察node实现http的基础协议")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\nHTTP/1.1 200 ok\nData: Tue,30 Jun 2020 01:00:00 GMT\nContent-Type: text/plain\nConnection: Closed\n// 上面是描述，下面设计文本内容\nHello word\n")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'err'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br")])]),n("p",[t._v("我们请求一下"),n("code",[t._v("http://localhost/")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(180),alt:""}})]),t._v(" "),n("p",[t._v("从上图可以看出respoons header是我们添加进去的，request header是浏览器帮我们添加进去的")]),t._v(" "),n("h3",{attrs:{id:"_1-4-3-基础工具链"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-基础工具链"}},[t._v("#")]),t._v(" 1.4.3 基础工具链")]),t._v(" "),n("ol",[n("li",[t._v("Chrome")])]),t._v(" "),n("ul",[n("li",[t._v("Google 开发的免费浏览器")]),t._v(" "),n("li",[t._v("Chrome 开发者拥有强大的调试能力")])]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("cURL")])]),t._v(" "),n("ul",[n("li",[t._v("传输一个URL（和服务端交互的工具）\n"),n("ul",[n("li",[t._v("url：网址（Uniform Resource Locator）")])])]),t._v(" "),n("li",[t._v("支持多种协议（HTTP/HTTPS/FTP/FTPS/SCP/SFTP/DICT/TELNET）")])]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" www.baidu.com "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回百度首页的内容，跟浏览器是一样的，会少一些响应头")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -I www.baidu.com "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回协议头部")]),t._v("\n\nHTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" OK\nAccept-Ranges: bytes\nCache-Control: private, no-cache, no-store, proxy-revalidate, no-transform\nConnection: keep-alive\nContent-Length: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("277")]),t._v("\nContent-Type: text/html\nDate: Sun, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(" Feb "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v(" 09:12:18 GMT\nEtag: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"575e1f59-115"')]),t._v("\nLast-Modified: Mon, "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" Jun "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2016")]),t._v(" 02:50:01 GMT\nPragma: no-cache\nServer: bfe/1.0.8.18\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("fetch")])]),t._v(" "),n("ul",[n("li",[t._v("在网络上获取数据的标准接口\n"),n("ul",[n("li",[t._v("提供对请求/返回对象（标准的Promise接口）")]),t._v(" "),n("li",[t._v("提供自定义header能力")]),t._v(" "),n("li",[t._v("提供跨域能力")])])])]),t._v(" "),n("p",[t._v('浏览器上可以直接请求 fetch("/")')]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("postMan")])]),t._v(" "),n("ul",[n("li",[t._v("协作的API开发工具")])]),t._v(" "),n("p",[t._v("经常用的场景是服务端工程师把一些复杂的请求参数配置好，通过postman可以分享出来给前端工程师")]),t._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[t._v("whistle")])]),t._v(" "),n("p",[t._v("whistle是一个抓包的工具，也叫网络调试工具，它能看到这些分包，可以在http协议上修改一些参数。")]),t._v(" "),n("ul",[n("li",[t._v("跨平台网络调试工具\n"),n("ul",[n("li",[t._v("需要SwitchOmega插件")]),t._v(" "),n("li",[t._v("node.js 开发")]),t._v(" "),n("li",[t._v("支持抓包 、重放、替换、修改等")])])])]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i whistle -g "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载，mac电脑：sudo npm i whistle -g ")]),t._v("\n    whistle start "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动")]),t._v("\n    http://localhost:8899/ "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 浏览器查看")]),t._v("\n    SwitchOmega "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 谷歌代理插件，可以配置127.0.0.1:8899的服务上")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h4",{attrs:{id:"谷歌代理插件switchomega-配置代理服务器127-0-0-1-8899的服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#谷歌代理插件switchomega-配置代理服务器127-0-0-1-8899的服务"}},[t._v("#")]),t._v(" 🍅 谷歌代理插件SwitchOmega，配置代理服务器127.0.0.1:8899的服务")]),t._v(" "),n("p",[n("img",{attrs:{src:a(33),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"示例-以代理百度为例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例-以代理百度为例"}},[t._v("#")]),t._v(" 🍅 示例：以代理百度为例")]),t._v(" "),n("p",[t._v("在想要代理的网址上选择"),n("code",[t._v("proxy")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(181),alt:""}})]),t._v(" "),n("p",[t._v("查看代理信息")]),t._v(" "),n("p",[n("img",{attrs:{src:a(182),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),n("p",[t._v("简单比效率更重要（java/HTTP）等")]),t._v(" "),n("h2",{attrs:{id:"_1-5-http协议详情讲解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-http协议详情讲解"}},[t._v("#")]),t._v(" 1.5 HTTP协议详情讲解")]),t._v(" "),n("h3",{attrs:{id:"_1-5-1-http协议内容和方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-http协议内容和方法"}},[t._v("#")]),t._v(" 1.5.1 HTTP协议内容和方法")]),t._v(" "),n("h4",{attrs:{id:"http常见的请求头"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http常见的请求头"}},[t._v("#")]),t._v(" 🍅 HTTP常见的请求头")]),t._v(" "),n("p",[n("img",{attrs:{src:a(183),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"http常见的返回头"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http常见的返回头"}},[t._v("#")]),t._v(" 🍅 HTTP常见的返回头")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("HTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("201")]),t._v(" Created "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 协议版本、状态码")]),t._v("\nx-Powered-By: Express "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# X-Powered-By")]),t._v("\nDate:Sun,19 Jul "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":01:51 GMT "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日期")]),t._v("\nConnection: keep-alive  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Connection")]),t._v("\nContent-length: "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# content-length")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h4",{attrs:{id:"基本方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本方法"}},[t._v("#")]),t._v(" 🍅 基本方法")]),t._v(" "),n("ul",[n("li",[t._v("GET\n"),n("ul",[n("li",[t._v("从服务器获取资源")])])]),t._v(" "),n("li",[t._v("HEAD\n"),n("ul",[n("li",[t._v("HEAD和GET类似，只是服务器的响应中只返回头部（没有实体部分）；在不获取资源情况下了解资源的状况")])])]),t._v(" "),n("li",[t._v("POST\n"),n("ul",[n("li",[t._v("在服务器创建资源")])])]),t._v(" "),n("li",[t._v("PUT\n"),n("ul",[n("li",[t._v("在服务器修改资源（幂等性），同一个url多次请求只修改一次")])])]),t._v(" "),n("li",[t._v("DELETE\n"),n("ul",[n("li",[t._v("在服务器删除资源（幂等性），同一个url多次请求只删除一次")])])]),t._v(" "),n("li",[t._v("OPTIONS\n"),n("ul",[n("li",[t._v("跨域时复杂请求\n"),n("ul",[n("li",[t._v("使用了 put/delete/connnect/trace/patch")]),t._v(" "),n("li",[t._v("人为设置了一些header字段")]),t._v(" "),n("li",[t._v("content-type的值不属于：application/x-www-form-urlencoded、multipart/form-data、text/plain")])])])])]),t._v(" "),n("li",[t._v("TRACE 用于显示调试信息\n"),n("ul",[n("li",[t._v("多数网站不支持，会泄露一些调试信息或者只有内部的时候才支持，它能帮助你追述整个http的链路，假如http发出去，它可能接收第一个不是网关；\n它可能是代理服务器，再通过负载均衡才到达你真实的服务器，这里面有一定的路径，trace可以帮助我们请求http协议的网址时协议调试信息")])])]),t._v(" "),n("li",[t._v("CONNECT\n"),n("ul",[n("li",[t._v("代理")])])]),t._v(" "),n("li",[t._v("PATCH\n"),n("ul",[n("li",[t._v("对资源进行部分更新（极少用）")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-5-2-常见http状态码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-常见http状态码"}},[t._v("#")]),t._v(" 1.5.2 常见HTTP状态码")]),t._v(" "),n("h4",{attrs:{id:"状态码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[t._v("#")]),t._v(" 🍅 状态码")]),t._v(" "),n("ul",[n("li",[n("p",[n("font",{attrs:{color:"green"}},[t._v("1.xx ：提供信息")])],1),t._v(" "),n("ul",[n("li",[t._v("100 continue 主要用来提供信息的，这个100还有一点历史原因，现在带宽都比较大；有时候传输数据比较大\n客户端询问一下服务端，服务端如果发送100continue，客户端继续向服务端传送，现在已经用的很少了。")]),t._v(" "),n("li",[t._v("101  切换协议（switch Protocol）\n我们浏览器生态不光有http协议、websocket协议、还有一些视频流的一些协议；这些协议和http之间是怎么切换的，客户端请求服务端的时候，如果服务端需要切换协议，会返回101，告诉客户端切换协议")])]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("HTTP/1.1 "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v(" Switching Protocols  \nUpgrade:websocket\nConnection: Upgrade\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])]),t._v(" "),n("li",[n("p",[n("font",{attrs:{color:"green"}},[t._v("2XX：成功")])],1),t._v(" "),n("ul",[n("li",[t._v("200-ok")]),t._v(" "),n("li",[t._v("201- Created 已创建")]),t._v(" "),n("li",[t._v("202- Accepted 已接收")]),t._v(" "),n("li",[t._v("203- Non-Authoritative information 非权威内容")]),t._v(" "),n("li",[t._v("204- No Content 那样内容")]),t._v(" "),n("li",[t._v("205- Reset Content 重置内容")]),t._v(" "),n("li",[t._v("206- Partial Content 服务器下发了部分内容（range header）\n注：多数服务端开发已经不遵循状态码")])])]),t._v(" "),n("li",[n("p",[n("font",{attrs:{color:"green"}},[t._v("3XX：重定向")])],1),t._v(" "),n("ul",[n("li",[t._v("300- Multiple Choices 用户请求了多个选项的资源（返回选项列表）")]),t._v(" "),n("li",[t._v("301- Moved Permanently 永久转移 （如果以前是post、delete等方法，如果在303的情况都会变成get）")]),t._v(" "),n("li",[t._v("302- Found 资源被找到（以前是临时转移，现在被拆成了2个状态码303和307）")]),t._v(" "),n("li",[t._v("303- See Other 可以使用GET方法在另一个URL找到资源（不管以前使用什么方法跳转过来的，最终303都给跳转一个get方法）")]),t._v(" "),n("li",[t._v("304- Not Modified 没有修改（这个资源没有再请求一遍，现在很多web服务器，它在下发资源给浏览器的时候，它会把资源内容做一次计算，计算出一个唯一的哈希值，哈希值会作为target传下来，浏览器会对比这个target，target变化会再去请求一次，web服务器知道哪些资源有变化，它有些算法在里面，计算出有没有变化，没有变化会返回一个304，并不会返回真实的资源。）")]),t._v(" "),n("li",[t._v("305- Use Proxy需要代理")]),t._v(" "),n("li",[t._v("307- Temporary Redirect 临时重定向")]),t._v(" "),n("li",[t._v("308- Permanent Redirect 永久重定向 （如果是post请求，收到308后还是308请求）")])])])]),t._v(" "),n("p",[n("font",{attrs:{color:"red"}},[t._v("收到服务端状态码，我们该怎么做？")])],1),t._v(" "),n("p",[t._v("这不是程序所决定的，它不是这个逻辑，因为整体设计是一个协议一个标准；在请求的时候我们能拿到状态码，即使返回了301我们都可以不用去跳转，反正你就不遵守协议，这无所谓，但是设计浏览器的人，他们都遵循这些协议，这些协议是一个标准，正常来说也要遵循这些协议；即使权利交到你手里 ，如果总是违反协议做事情，大家都乱了，大家要重新商议协议，沟通成本会增加。")]),t._v(" "),n("p",[t._v("🍅 面试解惑：301 vs 308")]),t._v(" "),n("ul",[n("li",[t._v("共同点\n"),n("ul",[n("li",[t._v("资源被永久移动到新的地址")])])]),t._v(" "),n("li",[t._v("差异\n"),n("ul",[n("li",[t._v("客户端收到308请求后，之前是什么method，那么之后也会沿用这个method(POST/GET/PUT)到新地 址")]),t._v(" "),n("li",[t._v("客户端收到301请求后，通常用户会向新地址发起GET请求")])])])]),t._v(" "),n("p",[t._v("历史原因：最早的浏览器设计不是像今天这样用ajax请求去动态创建网页，过去网页是网页设计师写出来的，那时候主要的请求都是GET，最早定义规范的人，他也强调过301怎么去做，定义协议的人其实考虑到这个问题了，但是大家都没有遵守这个协议，一开始本来你给我POST，我给你POST ，只是网址变化一下，但都大家不理它，导致http1.1之后还有增加308这些头。")]),t._v(" "),n("p",[t._v("🍅 面试解惑：302/303/307")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("共同点")]),t._v(" "),n("ul",[n("li",[t._v("资源临时放到新地址（请不要缓存）")])])]),t._v(" "),n("li",[n("p",[t._v("差异")]),t._v(" "),n("ul",[n("li",[t._v("302是http1.0提出的，最早叫做Moved Temporarily；很多浏览器实现的时候没有遵循标准，把所有请求都重定向到GET")]),t._v(" "),n("li",[t._v("1999年标准委员会增加了303和307，并将302重新定义为Found")]),t._v(" "),n("li",[t._v("303告诉客户端使用GET方法重定向资源")]),t._v(" "),n("li",[t._v("307告诉客户端使用原请求method重定向资源")])])]),t._v(" "),n("li",[n("p",[n("font",{attrs:{color:"green"}},[t._v("4XX：客户端错误")])],1),t._v(" "),n("ul",[n("li",[t._v("400- Bad Request 请求格式错误")]),t._v(" "),n("li",[t._v("401- Unauthorized 没有授权")]),t._v(" "),n("li",[t._v("402- Payment Required 请先付费")]),t._v(" "),n("li",[t._v("403- Forbidden 禁止访问")]),t._v(" "),n("li",[t._v("404- Not Found 没有找到")]),t._v(" "),n("li",[t._v("405- Mehtod Not Allowed 方法不被允许")]),t._v(" "),n("li",[t._v("406- Not Acceptable 服务端可以提供的内容和客户端期待不一样")])]),t._v(" "),n("p",[t._v("注：多数服务端开发已经不遵循状态码")])]),t._v(" "),n("li",[n("p",[n("font",{attrs:{color:"green"}},[t._v("5XX：服务端错误")])],1),t._v(" "),n("ul",[n("li",[t._v("500 - internal Server Error（内部服务器错误）")]),t._v(" "),n("li",[t._v("501 - Not implemented（没有实现）")]),t._v(" "),n("li",[t._v("502 - Bad Gateway（网管错误）")]),t._v(" "),n("li",[t._v("503 - Servive Unavailable（服务不可用）")]),t._v(" "),n("li",[t._v("504 - Gateway Timeout （网关超时）")]),t._v(" "),n("li",[t._v("505 - HTTP Version Not Supported（版本不支持）")])]),t._v(" "),n("p",[t._v("注：多数服务端开发已经不遵循状态码")])])]),t._v(" "),n("h3",{attrs:{id:"_1-5-3-常见http头"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-3-常见http头"}},[t._v("#")]),t._v(" 1.5.3 常见HTTP头")]),t._v(" "),n("h4",{attrs:{id:"content-length"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#content-length"}},[t._v("#")]),t._v(" 🍅 Content-Length")]),t._v(" "),n("ul",[n("li",[t._v("发送给接收者的Body内容长度（字节）\n"),n("ul",[n("li",[t._v("一个byte是8bit")]),t._v(" "),n("li",[t._v("Utf-8编码的自渎1-4字节")])])])]),t._v(" "),n("h4",{attrs:{id:"user-agent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#user-agent"}},[t._v("#")]),t._v(" 🍅 User-Agent")]),t._v(" "),n("ul",[n("li",[t._v("帮助区分客户端特性的字符串\n"),n("ul",[n("li",[t._v("操作系统")]),t._v(" "),n("li",[t._v("浏览器")]),t._v(" "),n("li",[t._v("制造商（手机类型等）")]),t._v(" "),n("li",[t._v("内核类型")]),t._v(" "),n("li",[t._v("版本号......")])])])]),t._v(" "),n("h4",{attrs:{id:"content-type"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#content-type"}},[t._v("#")]),t._v(" 🍅 Content-Type")]),t._v(" "),n("ul",[n("li",[t._v("帮助区分资源的媒体类型（Media Type/MIME Type）\n"),n("ul",[n("li",[t._v("text/html")]),t._v(" "),n("li",[t._v("text/css")]),t._v(" "),n("li",[t._v("application/json")]),t._v(" "),n("li",[t._v("image/jpeg")]),t._v(" "),n("li",[t._v("......")])])])]),t._v(" "),n("h4",{attrs:{id:"origin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#origin"}},[t._v("#")]),t._v(" 🍅 Origin")]),t._v(" "),n("ul",[n("li",[t._v("描述请求来源地址\n"),n("ul",[n("li",[t._v("scheme://host:port")]),t._v(" "),n("li",[t._v("不含路径")]),t._v(" "),n("li",[t._v("可以是null")])])])]),t._v(" "),n("h4",{attrs:{id:"accept"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#accept"}},[t._v("#")]),t._v(" 🍅 Accept")]),t._v(" "),n("ul",[n("li",[t._v("建议服务端返回何种媒体类型（MIME Type）\n"),n("ul",[n("li",[t._v("*/*代表所有类型（默认）")]),t._v(" "),n("li",[t._v("多个类型用逗号隔开例如：text/html，application/json")])])]),t._v(" "),n("li",[t._v("Accept-Encoding：建议服务端发送哪种编码（压缩算法）\n"),n("ul",[n("li",[t._v("deflate,gzip;q=1.0,*;q=0.5")])])]),t._v(" "),n("li",[t._v("Accept-Language：建议服务端传递哪种语言\n"),n("ul",[n("li",[t._v("Accept-Language：fr-CH,fr;q=0.9,en;q=0.8,de;q=0.7,*;q=0.5")])])])]),t._v(" "),n("h4",{attrs:{id:"referer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#referer"}},[t._v("#")]),t._v(" 🍅 Referer")]),t._v(" "),n("ul",[n("li",[t._v("告诉服务端打开当前页面的上一张页面的URL；如果是ajax请求，那么就告诉服务端发送请求的URL的是什么\n"),n("ul",[n("li",[t._v("非浏览器环境有时候不发送Referer（或者虚拟Referer，通常是爬虫）")]),t._v(" "),n("li",[t._v("常常用于用户行为分析")])])])]),t._v(" "),n("h4",{attrs:{id:"connection"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#connection"}},[t._v("#")]),t._v(" 🍅 Connection")]),t._v(" "),n("ul",[n("li",[t._v("决定连接是否在当前事务完成后关闭\n"),n("ul",[n("li",[t._v("Http1.0 默认是close")]),t._v(" "),n("li",[t._v("Http1.1后默认是keep-alive")])])])]),t._v(" "),n("h2",{attrs:{id:"_1-6-全栈角度看http协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-全栈角度看http协议"}},[t._v("#")]),t._v(" 1.6 全栈角度看HTTP协议")]),t._v(" "),n("h3",{attrs:{id:"_1-6-1-解析body和2xx状态码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-1-解析body和2xx状态码"}},[t._v("#")]),t._v(" 1.6.1 解析Body和2xx状态码")]),t._v(" "),n("h4",{attrs:{id:"实战-method和解析body"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实战-method和解析body"}},[t._v("#")]),t._v(" 🍅 实战-method和解析body")]),t._v(" "),n("ol",[n("li",[t._v("查询 GET /product")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/product'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'启动成功'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("新增 POST /product")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/product'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" contentType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("headers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" requestText"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http请求基于tcp，tcp会把传的数据，分成一个个分包；并不是一次传过来的；req不仅是一个请求对象，也继承了流的性质")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 流代表了未来的数据，当数据来的时候把数据给装起来")]),t._v("\n    req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("buffer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utf-8 用1到4个字节描述一个字符，世界上有太多字符了，像a、b、c这样的一个字节就描述完了")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'buffer'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        requestText "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'contentType'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("contentType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contentType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log('requestText',JSON.parse(requestText))")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("201")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("success"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'启动成功'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br")])]),n("p",[t._v("在浏览器上请求一下"),n("code",[t._v("fetch(\"/product\",{method:\"POST\",headers:{'content-type':'application/json'},body:JSON.stringify({name:''.padStart(100000,'A')})}).then(res=>{console.log(res)})")]),t._v(" "),n("img",{attrs:{src:a(184),alt:""}})]),t._v(" "),n("p",[t._v("在控制台中可以看出，打印buffer.length出现了2次，因为传值不是一下传过来的，因为tcp是分包传输。")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("➜  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.6")]),t._v(" git:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ✗ nodemon ./index.js\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nodemon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v(".4\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nodemon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" to restart at any time, enter "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("rs"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nodemon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" watching path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(": *.*\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nodemon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" watching extensions: js,mjs,json\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nodemon"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" starting "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("node ./index.js"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n启动成功\nbuffer "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("64773")]),t._v("\nbuffer "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("35238")]),t._v("\ncontentType application/json\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("修改 PUT /product/:id")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/product/:id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("删除 DELETE /product/:id")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/product/:id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"_1-6-2-跳转header和3xx状态码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-2-跳转header和3xx状态码"}},[t._v("#")]),t._v(" 1.6.2 跳转Header和3xx状态码")]),t._v(" "),n("h4",{attrs:{id:"实战-重定向观察"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实战-重定向观察"}},[t._v("#")]),t._v(" 🍅 实战-重定向观察")]),t._v(" "),n("ul",[n("li",[t._v("观察下列重定向行为的区别\n"),n("ul",[n("li",[t._v("301、302、303、307")])])])]),t._v(" "),n("ol",[n("li",[t._v("301")])]),t._v(" "),n("p",[t._v("当访问"),n("code",[t._v("http://localhost:3000/301")]),t._v("时候，浏览器会跳转到"),n("code",[t._v("http://localhost:3000/def")]),t._v("；跳转是浏览器的行为。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 遵守规范有利于网站的seo，不能随便用301，浏览器会有缓存")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/301'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'THIS IS DEF(get)'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[t._v("302、303、307")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 302、303 post请求会重定向到get请求")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/302'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("303")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/303'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("303")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'THIS IS DEF(get)'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 307 post请求，会重定向到post请求")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/307'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("307")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/def'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'THIS IS DEF(307post)'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br")])]),n("h3",{attrs:{id:"_1-6-3-实战-错误处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-3-实战-错误处理"}},[t._v("#")]),t._v(" 1.6.3 实战-错误处理")]),t._v(" "),n("ul",[n("li",[t._v("为下列场景返回不同的错误码\n"),n("ul",[n("li",[t._v("用户没有登录")]),t._v(" "),n("li",[t._v("服务器报错")]),t._v(" "),n("li",[t._v("内容没有找到")]),t._v(" "),n("li",[t._v("不支持POST请求")])])])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用户没有登录")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 500服务端抛错，会自定帮你做")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Error"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 502网管错误，一般不自己指定")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 找不到资源，一般找不到资源框架会帮去返回404")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendStatus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("h2",{attrs:{id:"_1-7-加密和http证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-加密和http证书"}},[t._v("#")]),t._v(" 1.7 加密和HTTP证书")]),t._v(" "),n("h3",{attrs:{id:"_1-7-1-对称加密和非对称加密"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-1-对称加密和非对称加密"}},[t._v("#")]),t._v(" 1.7.1 对称加密和非对称加密")]),t._v(" "),n("h4",{attrs:{id:"明文传输"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#明文传输"}},[t._v("#")]),t._v(" 🍅 明文传输")]),t._v(" "),n("p",[t._v("如果2个人对话，本来就是私密的，当然不想让三个人看见；如果小区有交换机，小区的工人人员就可以看报文，可能就会动起了坏心思。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(185),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"加密"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加密"}},[t._v("#")]),t._v(" 🍅 加密")]),t._v(" "),n("p",[t._v("给Alice传的发出内容进行加密，Bob这边在进行解密；加密解密也没回绝对安全；这样给破解人增加了难度。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(186),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"什么是加密"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是加密"}},[t._v("#")]),t._v(" 🍅 什么是加密")]),t._v(" "),n("p",[t._v("将明文信息变成不可读的密文内容，只有拥有解密方法的对象才能够将密闻还原成加密前的内容")]),t._v(" "),n("p",[t._v("下面的例子就是隔3个拿一个字符，从而达到给明文加密")]),t._v(" "),n("p",[n("img",{attrs:{src:a(187),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"加密方法-解密方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加密方法-解密方法"}},[t._v("#")]),t._v(" 🍅 加密方法/解密方法")]),t._v(" "),n("ul",[n("li",[t._v("计算机中，加密方法和解密方法，可以描述为一段程序，我们称作加密/解密算法")]),t._v(" "),n("li",[t._v("加密有时候会对暗号，比如上一个例子中每次跳过3个字符，[3]就是一个暗号，我们称作密钥")])]),t._v(" "),n("h4",{attrs:{id:"对称加密-非对称加密"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对称加密-非对称加密"}},[t._v("#")]),t._v(" 🍅 对称加密/非对称加密")]),t._v(" "),n("ul",[n("li",[t._v("加密和解密的暗号（秘钥）相同，我们称为对称加密")]),t._v(" "),n("li",[t._v("加密和解密的暗号（秘匙）不同，我们称为非对称加密")])]),t._v(" "),n("h4",{attrs:{id:"非对称加密-秘钥对"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密-秘钥对"}},[t._v("#")]),t._v(" 🍅 非对称加密（秘钥对）")]),t._v(" "),n("ul",[n("li",[t._v("创建者创建一个秘钥对（分成公钥和私钥）")]),t._v(" "),n("li",[t._v("公钥加密必须私钥解密")]),t._v(" "),n("li",[t._v("私钥加密必须公钥解密")]),t._v(" "),n("li",[t._v("创建者保留私钥，公钥向外界公开")])]),t._v(" "),n("img",{attrs:{width:"500px",src:a(188)}}),t._v(" "),n("h3",{attrs:{id:"_1-7-2-信任体系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-2-信任体系"}},[t._v("#")]),t._v(" 1.7.2 信任体系")]),t._v(" "),n("h4",{attrs:{id:"证书体系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#证书体系"}},[t._v("#")]),t._v(" 🍅 证书体系")]),t._v(" "),n("p",[n("img",{attrs:{src:a(189),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"算法如何验证证书就是alibaba"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#算法如何验证证书就是alibaba"}},[t._v("#")]),t._v(" 🍅 算法如何验证证书就是Alibaba")]),t._v(" "),n("p",[t._v("Alibaba向第三方证书机构申请证书，第三方机构用根证书的私钥给Ailibaba证书签名；然后可以用根证书的公钥进行验证签名是不是alibaba的证书。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(190),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"_1-7-3-算法种类介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-3-算法种类介绍"}},[t._v("#")]),t._v(" 1.7.3 算法种类介绍")]),t._v(" "),n("ul",[n("li",[t._v("DES （Data Encryption Standard）\n"),n("ul",[n("li",[t._v("1970 IMB提出的对称加密算法")]),t._v(" "),n("li",[t._v("可暴力破解")])])]),t._v(" "),n("li",[t._v("AES （Advanced Encryption Standard）\n"),n("ul",[n("li",[t._v("2001年美国国家标准于技术研究院发布的对称加密算法")]),t._v(" "),n("li",[t._v("可旁道攻击")])])]),t._v(" "),n("li",[t._v("RSA（Rivest-Shamir-Adleman）\n"),n("ul",[n("li",[t._v("1997年发布的非对称加密算法")])])])]),t._v(" "),n("h4",{attrs:{id:"对称-vs-非对称"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对称-vs-非对称"}},[t._v("#")]),t._v(" 🍅 对称 VS 非对称")]),t._v(" "),n("ul",[n("li",[t._v("非对称加密安全性更好")]),t._v(" "),n("li",[t._v("对称加密计算速度更快")]),t._v(" "),n("li",[t._v("通常混合使用（利用非对称加密协商密钥，然后进行对称加密，https也是混合使用，不是一种加密用到底的）")])]),t._v(" "),n("h3",{attrs:{id:"_1-7-4-https工作原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-4-https工作原理"}},[t._v("#")]),t._v(" 1.7.4 HTTPS工作原理")]),t._v(" "),n("p",[n("img",{attrs:{src:a(191),alt:""}})]),t._v(" "),n("p",[t._v("假如有30ms网络延迟，假如用https发送一条数据，服务端收到到确认成功，最少使用多少时间？")]),t._v(" "),n("p",[t._v("需要190ms，服务端收到后还会发送还会发送一个ack")]),t._v(" "),n("h2",{attrs:{id:"_1-8-udp-vs-tcp-http-vs-https"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-udp-vs-tcp-http-vs-https"}},[t._v("#")]),t._v(" 1.8 UDP vs TCP，HTTP vs HTTPS")]),t._v(" "),n("h3",{attrs:{id:"_1-8-1-udp"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-1-udp"}},[t._v("#")]),t._v(" 1.8.1 UDP")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("比TCP节省网络资源和迅速")]),t._v(" "),n("ul",[n("li",[t._v("不需要建立连接（延迟更低）")]),t._v(" "),n("li",[t._v("封包体积更小 （传输入速度快）")]),t._v(" "),n("li",[t._v("不关心数据顺序（不需要序号和ACK，传输快速）")]),t._v(" "),n("li",[t._v("不保证数据不丢失")])])])]),t._v(" "),n("h4",{attrs:{id:"思考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[t._v("#")]),t._v(" 思考")]),t._v(" "),n("p",[t._v("没有虚拟连接、不校验数据、不保证顺序、没有收到不重复---是不是意味着不安全、不可靠？")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("UDP自由度跟高")]),t._v(" "),n("ul",[n("li",[t._v("需要用户程序在应用层定义类似的机制")]),t._v(" "),n("li",[t._v("TCP面向流（API接收流）、UDP面向消息（API接收数据包）")])])]),t._v(" "),n("li",[n("p",[t._v("场景不同")]),t._v(" "),n("ul",[n("li",[t._v("模糊：文件&文本、多媒体")]),t._v(" "),n("li",[t._v("TCP：远程控制")]),t._v(" "),n("li",[t._v("UDP：DNS查询")])])])]),t._v(" "),n("h3",{attrs:{id:"_1-8-2-http2-0-目标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-2-http2-0-目标"}},[t._v("#")]),t._v(" 1.8.2 HTTP2.0 目标")]),t._v(" "),n("ul",[n("li",[t._v("多个请求多路复用")]),t._v(" "),n("li",[t._v("防止对头阻塞")]),t._v(" "),n("li",[t._v("压缩HTTP头部")]),t._v(" "),n("li",[t._v("服务端推送")])]),t._v(" "),n("h4",{attrs:{id:"http-1-1-排队问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-1-1-排队问题"}},[t._v("#")]),t._v(" 🍅 HTTP 1.1 排队问题")]),t._v(" "),n("p",[t._v("HTTP 1.1多个文件共用一个TCP，这样可以减少tcp握手，这样3个文件就不用握手9次了，不过这样请求文件需要排队，请求和返回都需要排队，\n如果第一个文件响应慢，会阻塞后面的文件，这样就产生了对头的等待问题。")]),t._v(" "),n("p",[t._v("有的网站可能会有很多文件，浏览器处于对机器性能的考虑，它不可能让你无限制的发请求建连接，因为建立连接需要占用资源，浏览器不想把用户的网络资源都占用了，所以浏览器最多会建立6个tcp连接；如果有上百个文件可能都需要排队，http2.0正在解决这个问题。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(192),alt:""}})]),t._v(" "),n("h4",{attrs:{id:"http-2-0"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-2-0"}},[t._v("#")]),t._v(" 🍅 HTTP 2.0")]),t._v(" "),n("ol",[n("li",[t._v("多路复用")])]),t._v(" "),n("p",[t._v("http1.1是一个请求过去，一个请求返回来，然后在进行下一个请求；其实是在排队的。http2.0发现2个请求比较靠近，把2个请求打包成一个请求发过去；也就是说把几个请求打包成一个小块去请求，并行发送；即使一个阻塞了，另一个还能回来，可以并行的出去也可以并行的回来；假如第一个请求需要0.8秒，第二个第三个各需要0.5秒；那么http2.0可以在0.8秒内把这3个一起去请求，这样只需0.8秒，即使一个阻塞了也不影响其他的返回。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(193),alt:""}})]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("防止对头阻塞")])]),t._v(" "),n("p",[t._v("http1.1如果第一个文件阻塞，第二个文件也就阻塞了。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(194),alt:""}})]),t._v(" "),n("p",[t._v("http2.0的解决，把3个请求打包成一个小块发送过去，即使第一个阻塞了，后面2个也可以回来；相当于3个文件同时请求，就看谁先回来谁后回来，阻塞的可能就后回来，对带宽的利用是最高的；但没有解决TCP的对头阻塞，如果TCP发过去的一个分包发丢了，他会重新发一次；http2.0的解决了大文件的阻塞。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(195),alt:""}})]),t._v(" "),n("p",[t._v("一个分包请求3个文件，即使第一个阻塞了，第二个也能返回")]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("压缩头部")])]),t._v(" "),n("ul",[n("li",[t._v("HPACK技术")])]),t._v(" "),n("p",[t._v("例如：METHOD GET 用2表示,就是我用2去表示METHOD GET，这样不就小了，这样压缩比率非常大，可以参考下面表代表Header压缩后的字符。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(196),alt:""}})]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("服务端推送")])]),t._v(" "),n("p",[t._v("我们现在的网站是先请求一个html，然后加载这个html，如果这个html有js文件和css文件，在去请求js和css；有没有可能html、js、css一起推送过来，这样是不是快很多。")]),t._v(" "),n("p",[t._v("当也有一个问题，现在页面主要是js渲染，那么js的先后顺序影响了页面的渲染；那么服务端推送也就存在问题了。")]),t._v(" "),n("h3",{attrs:{id:"_1-8-3-http3-0"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-3-http3-0"}},[t._v("#")]),t._v(" 1.8.3 HTTP3.0")]),t._v(" "),n("img",{attrs:{width:"500px",src:a(197)}}),t._v(" "),n("p",[t._v("http3.0现在还属于一个实验阶段，上面是一个体系图，理解了TCP和UDP的关系，就会理解为什么有个3.0。")]),t._v(" "),n("p",[t._v("从网络层（ip）->链接层->物理层这里是基本不变的，传输层是TCP或UDP，在这个TCP之上构建了HTTP1.1/HTTTP2.0的体系，0.9、1.0大家已经不用了，现在基本都是2.0。")]),t._v(" "),n("p",[t._v("3.0直接把TCP换成UDP了，换成UDP后就出问题了，可靠性和安全性上出了问题，那么就自己做一层，这个叫"),n("code",[t._v("QUIC")]),t._v("，就是快的意思；谷歌的作品，这个谷歌说给http提高了很大的一部分空间，因为TCP到UDP本来就有很大的性能差距。")]),t._v(" "),n("p",[t._v("http1.1/http2.0中间还有一个加密层，还要对数据的压缩，"),n("code",[t._v("QUIC")]),t._v("自己层承担了这部分工作，优化做的非常足，所以速度很快；3.0不再改协议了，也没有这么多的概念，它是整个层重写了，是基于UDP的，因为要保证可靠性，它是基于文件传输做的重写；文本传输做的重写，这就是3.0。")]),t._v(" "),n("h3",{attrs:{id:"总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),n("ul",[n("li",[t._v("UDP把自由度给了用户，使用的人少，TCP自由度低，用的人多。")]),t._v(" "),n("li",[t._v("HTTP2.0/HTTP3.0都兼容HTTP1.1")])])])}),[],!1,null,null,null);s.default=e.exports}}]);